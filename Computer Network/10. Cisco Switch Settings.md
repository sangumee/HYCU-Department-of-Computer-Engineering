# 충돌 도메인과 마이크로세그멘테이션
- CDMA/CD에서 동시에 통신을 시도하면 충돌이 발생함
- 충돌이 발생하면 전송을 중지하고 임의의 시간 동안 대기 후에 재시도함
- 충돌 도메인을 분리하는 장치 : Bridge, Switch
- Bridge : MAC 주소를 사용하여 패킷을 필터링 함으로서, 충돌 도메인을 분리함, 소프트웨어로 구현, switch로 대체됨
- Switch : Multiport Bridge의 기능 , 하드웨어로 구현하여 고속으로 작동, 충돌 도메인을 1개의 장치로 분리하여 충돌을 제거(Microsegmentation)
- 마이크로세그멘테이션(Microsegmentation) : 하나의 세그먼트에 하나의 장비만을 연결하여, 다른 장비와 대역폭 경쟁을 하지 않도록 함으로서 충돌을 방지하는 것
- 스위치 사용전 : 네트워크 세그먼트에서 모든 트래픽이 보임
- 스위치 사용후 : 스위치 내에 여러개의 트래픽 경로가 있음

# 시스코 스위치 LED
- 스위치는 아무런 설정(관리를 위한 설정) 없이 전원코드만 꽃으면 (전원스위치도 없음) 기본적으로 작동됨
- POST 도중 오류가 발생하면 콘솔에 그 내용을 표시
- Catalyst Switch의 LED : green 정상 amber 고장

- System LED : 스위치 시스템의 상태를 표시
- 꺼짐 : 시스템에 전원이 공급되지 않음
- 녹색 : 정상 동작
- 황색 : 정상 동작되지 않음, POST과정에서 오류가 발생

- RPS(Redundant Power Supply) LED : 예비 전원의 상태를 표시함
- 녹색 : 예비전원이 정상적으로 동작하고 있음
- 녹색 점멸 : RPS가 다른 장비에 전원을 공급하고 있어서 현재 사용 불가
- 황색 : RPS가 설치되어있지만 작동중이지 않음
- 황색 점멸 : 내장 전원 공급장치에 이상이 있어서 RPS에서 전원을 공급중임
- 꺼짐 : RPS가 꺼져있거나 설치되어 있지 않음

- 포트 상태 LED : 각각의 포트 상태를 표시함
- 4가지 포트모드 (STAT, UTIL, DUPLEX, SPEED)에 따라 의미가 다름
- Mode 버튼으로 모드 선택 가능

- STAT(Status) 모드 : 각각 포트의 상태를 표시함
- 꺼짐 : 포트에 링크가 연결되지 않음
- 녹색 : 링크가 연결되어 있지만 현재 트래픽이 없음
- 녹색 점멸 : 링크가 연결되어 있으며 현재 트래픽이 있음
- 황색 : 포트가 비활성화됨

- UTIL(Utilization) 모드
- 각 포트의 대역폭 활용 상태를 표시함
- 모든 포트가 녹색 : 대역폭이 50% 이상 사용됨
- 마지막 포트를 제외한 모든 포트가 녹색 : 대역폭 사용도가 25%~49%
- 마지막 2포트를 제외한 모든 포트가 녹색 : 대역폭 사용도가 25% 미만

- DUPLEX 모드 : 각 포트의 전이중, 반이중 동작을 표시함
- 꺼짐 : 반이중으로 동작
- 녹색 : 전이중으로 동작

- SPEED 모드 : 각 포트의 전송 속도를 표시함
- 꺼짐 : 10Mbps
- 녹색 : 100Mbps
- 녹색 점멸 : 1Gbps

# 스위치의 동작
- 주소 학습(Learning Addresses)
- 초기 스위치의 MAC address table은 비어있음
- 스테이션 A가 스테이션 B로 프레임을 전송하는 경우
- 스위치는 프레임의 발신지 주소를 참조하여 MAC 주소 테이블에 스테이션 A의 MAC 주소와 포트 E0DP WJQTHREHLDJ DLtDMADMF RLFHRGKA
- 스위치는 MAC 주소 테이블에 목적지 주소가 없으면 해당 프레임을 플러딩함 (포트 E0을 제외한 모든 포트로 프레임을 전송함)

- 스테이션 D가 스테이션 C로 프레임을 전송하는 경우
- 스위치는 프레임의 발신지 주소를 참조하여 MAC 주소 테이블에 스테이션 D의 MAC 주소와 포트 E3에 접속되어있음을 기록함
- 스위치는 MAC 주소 테이블에 스테이션 C의 주소가 없으므로 해당 프레임을 플러딩함(포트E3을 제외한 모든 포트로 프레임을 전송)

- 스테이션 A가 스테이션 C로 프레임을 전송하는 경우
- MAC 주소 테이블에 목적지 주소가 있으므로 해당 포트 E2로만 프레임을 전송하고 나머지 포트로는 프레임을 필터링함

- show mac-address-table 명령어
- MAC address table의 내용을 보여줌
- Dynamic address는 일정 시간 동안 사용되지 않으면 테이블에서 삭제됨
- Catalyst 2960 스위치는 최대 8192개의 MAC 주소를 저장함
- 저장 공간이 다 차면 새로운 주소로 가는 프레임은 Flooding됨

# 루프 방지
- 이중화 토폴로지(Redundant Topology)
- 네트워크 세그먼트를 하나의 스위치로 연결하는 경우, 그 스위치가 고장나면 연결이 끊어짐
- 복수의 스위치를 사용하여 이중화 연결을 함
- 이중화 연결을 하면 루프가 발생함
- 프레임이 무한대로 순환
- Broadcast Storms, Multiple Frame Transmission, MAC database Instability
- 브로드캐스트 폭풍(Broadcast Storms)
- 호스트 X가 스위치 A로 브로드캐스트 프레임을 전송하면, 스위치 A는 세그먼트 2로 플러딩하고 스위치 B는 이 프레임을 다시 세그먼트 1로 플러딩 하는 동작을 끝없이 반복하게 됨

- 프레임 다중 전송(Multiple Frame Transmission)
